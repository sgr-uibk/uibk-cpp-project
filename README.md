# Game Specification

We built a simple real-time networked multiplayer game.

We have an isometric view of the world, players are tanks, they have health and can shoot projectiles.

There are obstacles on the map that can be damaged and destroyed. Collisions with obstackles deals damage to players.
The maps themselves are predefined, stored as json files.

Game flow is a classic Lobby - Battle loop:
There is a dedicated server hosting a lobby, where players can join, the game starts when all players are ready.
In the match, players can move around the map and shoot each other until the last one survives, who is the winner.

An emphasis was made on a proper Client-Server model that makes many forms of cheating impossible by design (e.g.
noclip, teleport / movement speed hacks, health and damage cheats, etc.).
The Server is always authoritative, clients do prediction and reconciliation of their local state to ensure a smooth
experience for the player.
In case of a discrepancy between client and server, the clients will accept the server state to ensure consistency and
prevent the above mentioned ways of cheating.

The Server enforces UDP packet ordering - it drops reordered and duplicated packets to prevent cheating on the network
layer.
Passive cheats are still possible to some degree: The client does interpolation, so with intentional modification of
their client, cheating players can exploit this system to show all interpolation data, thus see where enemies are moving
a few frames ahead of time.

:
- Nier Automata's Hacking Minigame ![](https://www.confreaksandgeeks.com/wp-content/uploads/2017/03/NieR_Automata_20170315171011.jpg)
- Tank 1990
- Tank Trouble
- ![Reference Picture](images/reference_game1.gif)
- ![Reference Picture](images/reference_game2.jpg)
---

## Goals (11 Points)

- (2) Matchmaking Lobby 
    - Players connect to a lobby hosted by a player, by entering an ip:port.
    - Up to 4 players, per match
    - The Map is chosen by the host in the lobby, before the match starts.
    - Players mark themselves as ready, when all players are ready, the lobby host can start the game.
- (1) Players
    - Players have colors to distinguish them (blue tank, red tank, ...) and have names.
    - Player can move around, aim at enemies and shoot at them
    - Health can be regenerated by obtaining and using items (e.g. repair kits).
    - UI / HUD shows current player's health, status of enemies (alive, dead). 
- (2) Maps
    - Premade selection of maps (quadratic grid) with traversable / impassable terrain.
- (3) Combat
    - Real-time over the network
    - When being hit, the players health decreases, player dies when it reaches 0.
    - Match ends once there is only one surviving player left.
    - Ending screen shows the winner and a ranklist, afterwards back to lobby and repeat this cycle.
- (1) Items
    - Player can pick up items that are randomly distributed on the map,
    - Items grant the player a temporary effect: speed bonus healing or similar.
    - Items can be used by a player by pressing a key, this consumes the item.
- (1) Audio
    - Background music
    - Sound effects
- (1) Main menu
    - Join Lobby
    - Host Lobby
    - Set Name
    - Exit



## How to Build

### Build for Windows
First, download and install [Git](https://git-scm.com/install/windows) and [Git-LFS](https://git-lfs.com/). 

Then, `git clone` this repository and open a shell inside its directory.
Run:
```powershell
git lfs install # (only once)
git lfs checkout # to be safe
# The following fetch and build external libraries, so can take a while at first
cmake -S . -B build
cmake --build build --config Release
dir build
```

### Build for Linux (Ubtuntu in this example)
```shell
sudo apt update && sudo apt install -y libsfml-dev cmake build-essential git git-lfs libnlohmann-json3-dev

# If that fails, try explicitly specifying the dependencies for libsfml-dev
sudo apt install -y \
  libfreetype6-dev libx11-dev libxrandr-dev libxcursor-dev libxi-dev \
  libudev-dev libgl1-mesa-dev libflac-dev libogg-dev libvorbis-dev \
  libvorbisenc2 libvorbisfile3 libpthread-stubs0-dev git-lfs 
```

Then, `git clone` this repository and open a shell inside its directory.
```shell
git lfs install # (only once)
git lfs checkout # to be safe
cmake -S . -B build
cmake --build build --config Release
ls build
```
